<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>How to build and run randon</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="hcab" id="how-to-build-and-run-randon">How to build and run randon</h1><p data-anchor-id="6l9q"><code>未分类</code></p><hr><div class="md-section-divider"></div><h2 data-anchor-id="yomf" id="requirements">Requirements</h2><ol data-anchor-id="km3d">
<li><a href="http://golang.org" target="_blank">Go</a> version 1.8 or newer is required.("sudo apt install golang" for ubuntu or "yum install golang" for centOS/redhat)</li>
<li>A 64-bit system is strongly recommended. Building or running radon on 32-bit systems has not been tested</li>
</ol><div class="md-section-divider"></div><h2 data-anchor-id="p69u" id="step1-download-src-code-from-github">Step1. Download src code from github</h2><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="2zkm"><ol class="linenums"><li class="L0"><code><span class="pln">$ git clone https</span><span class="pun">:</span><span class="com">//github.com/radondb/radon</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="fmtk" id="step2-build">Step2. Build</h2><p data-anchor-id="2gve">After download radon src code from github, it will generate a directory named "radon", execute the following commands:</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="l8tl"><ol class="linenums"><li class="L0"><code><span class="pln">$ cd radon</span></code></li><li class="L1"><code><span class="pln">$ make build</span></code></li></ol></pre><p data-anchor-id="vv75">The binary executable file is in the "bin" directory, execute  command "ls bin/":</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="acud"><ol class="linenums"><li class="L0"><code><span class="pln">$ ls bin</span><span class="pun">/</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pun">---</span><span class="typ">Response</span><span class="pun">---</span></code></li><li class="L3"><code><span class="pln">$ radon radoncli</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="6qfm" id="step3-run">Step3. Run</h2><p data-anchor-id="td66">Copy the default configure file conf/radon.default.json into bin first:</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="1p37"><ol class="linenums"><li class="L0"><code><span class="pln">$ cp conf</span><span class="pun">/</span><span class="pln">radon</span><span class="pun">.</span><span class="kwd">default</span><span class="pun">.</span><span class="pln">json bin</span><span class="pun">/</span></code></li></ol></pre><p data-anchor-id="jokx">Then Run RadonDB server:</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="i45f"><ol class="linenums"><li class="L0"><code><span class="pln">$ bin</span><span class="pun">/</span><span class="pln">radon </span><span class="pun">-</span><span class="pln">c bin</span><span class="pun">/</span><span class="pln">radon</span><span class="pun">.</span><span class="kwd">default</span><span class="pun">.</span><span class="pln">json</span></code></li></ol></pre><p data-anchor-id="m3qm">If start successfully, you will see infos next:</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="6ecj"><ol class="linenums"><li class="L0"><code><span class="pln">    radon</span><span class="pun">:[{</span><span class="typ">Tag</span><span class="pun">:</span><span class="pln">rc</span><span class="pun">-</span><span class="lit">20180126</span><span class="pun">-</span><span class="lit">16</span><span class="pun">-</span><span class="pln">gf448be1 </span><span class="typ">Time</span><span class="pun">:</span><span class="lit">2018</span><span class="pun">/</span><span class="lit">04</span><span class="pun">/</span><span class="lit">04</span><span class="pln"> </span><span class="lit">03</span><span class="pun">:</span><span class="lit">31</span><span class="pun">:</span><span class="lit">39</span><span class="pln"> </span><span class="typ">Git</span><span class="pun">:</span><span class="pln">f448be1</span></code></li><li class="L1"><code><span class="pln">    </span><span class="typ">GoVersion</span><span class="pun">:</span><span class="pln">go1</span><span class="pun">.</span><span class="lit">8.3</span><span class="pln"> </span><span class="typ">Platform</span><span class="pun">:</span><span class="pln">linux amd64</span><span class="pun">}]</span></code></li><li class="L2"><code><span class="pln">    </span><span class="lit">2018</span><span class="pun">/</span><span class="lit">04</span><span class="pun">/</span><span class="lit">04</span><span class="pln"> </span><span class="lit">15</span><span class="pun">:</span><span class="lit">20</span><span class="pun">:</span><span class="lit">17.136839</span><span class="pln"> proxy</span><span class="pun">.</span><span class="pln">go</span><span class="pun">:</span><span class="lit">79</span><span class="pun">:</span></code></li><li class="L3"><code><span class="pln">     </span><span class="pun">....</span></code></li><li class="L4"><code><span class="pln">     </span><span class="pun">....</span><span class="pln"> </span></code></li><li class="L5"><code><span class="pln">    </span><span class="lit">2018</span><span class="pun">/</span><span class="lit">04</span><span class="pun">/</span><span class="lit">04</span><span class="pln"> </span><span class="lit">15</span><span class="pun">:</span><span class="lit">20</span><span class="pun">:</span><span class="lit">17.151499</span><span class="pln"> admin</span><span class="pun">.</span><span class="pln">go</span><span class="pun">:</span><span class="lit">54</span><span class="pun">:</span><span class="pln">      </span><span class="pun">[</span><span class="pln">INFO</span><span class="pun">]</span><span class="pln">     http</span><span class="pun">.</span><span class="pln">server</span><span class="pun">.</span><span class="pln">start</span><span class="pun">[:</span><span class="lit">8080</span><span class="pun">]...</span></code></li></ol></pre><p data-anchor-id="pgnx">When randon started, it will use three ports: <br>
<code>3306: External service port for MySQL client link</code> <br>
<code>8080: Management port, external RESTFUL interface</code> <br>
<code>6060: debug port, golang debug port</code></p><div class="md-section-divider"></div><h2 data-anchor-id="t2a5" id="step4-add-a-backendmysql-server-to-randon">Step4. Add a backend(mysql server) to randon</h2><p data-anchor-id="5d4m">This is an admin instruction of randon api, for more admin instructions, see  randon admin API ). <br>
Here we suppose  mysql has being installed and mysql service has beeing started on your machine and the user and password logined to mysql are all root. <br>
<code>user: the user to login mysql</code> <br>
<code>password: the password to login mysql</code></p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="onla"><ol class="linenums"><li class="L0"><code><span class="pln">$ curl </span><span class="pun">-</span><span class="pln">i </span><span class="pun">-</span><span class="pln">H </span><span class="str">'Content-Type: application/json'</span><span class="pln"> </span><span class="pun">-</span><span class="pln">X POST </span><span class="pun">-</span><span class="pln">d \</span></code></li><li class="L1"><code><span class="pun">&gt;</span><span class="pln"> </span><span class="str">'{"name": "backend1", "address": "127.0.0.1:3306", "user":\</span></code></li><li class="L2"><code><span class="str">&gt;  "root", "password": "318831", "max-connections":1024}'</span><span class="pln"> \</span></code></li><li class="L3"><code><span class="pun">&gt;</span><span class="pln"> http</span><span class="pun">:</span><span class="com">//127.0.0.1:8080/v1/radon/backend</span></code></li></ol></pre><p data-anchor-id="vtfr"><code>Response:</code></p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="f7oc"><ol class="linenums"><li class="L0"><code><span class="pln">HTTP</span><span class="pun">/</span><span class="lit">1.1</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> OK</span></code></li><li class="L1"><code><span class="typ">Date</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Mon</span><span class="pun">,</span><span class="pln"> </span><span class="lit">09</span><span class="pln"> </span><span class="typ">Apr</span><span class="pln"> </span><span class="lit">2018</span><span class="pln"> </span><span class="lit">03</span><span class="pun">:</span><span class="lit">23</span><span class="pun">:</span><span class="lit">02</span><span class="pln"> GMT</span></code></li><li class="L2"><code><span class="typ">Content</span><span class="pun">-</span><span class="typ">Length</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L3"><code><span class="typ">Content</span><span class="pun">-</span><span class="typ">Type</span><span class="pun">:</span><span class="pln"> text</span><span class="pun">/</span><span class="pln">plain</span><span class="pun">;</span><span class="pln"> charset</span><span class="pun">=</span><span class="pln">utf</span><span class="pun">-</span><span class="lit">8</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="meny" id="step5-connect-mysql-client-to-radon">Step5. Connect mysql client to radon</h2><p data-anchor-id="jxjl">Radon supports client connections to the MySQL protocol</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="9pbc"><ol class="linenums"><li class="L0"><code><span class="pln">$ mysql </span><span class="pun">-</span><span class="pln">uroot </span><span class="pun">-</span><span class="pln">h127</span><span class="pun">.</span><span class="lit">0.0</span><span class="pun">.</span><span class="lit">1</span><span class="pln"> </span><span class="pun">-</span><span class="pln">P3306</span></code></li></ol></pre><p data-anchor-id="sl1e">If connected success, you will see:</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="lmt1"><ol class="linenums"><li class="L0"><code><span class="typ">Welcome</span><span class="pln"> to the </span><span class="typ">MySQL</span><span class="pln"> monitor</span><span class="pun">.</span><span class="pln">  </span><span class="typ">Commands</span><span class="pln"> </span><span class="kwd">end</span><span class="pln"> </span><span class="kwd">with</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> \g</span><span class="pun">.</span></code></li><li class="L1"><code><span class="typ">Your</span><span class="pln"> </span><span class="typ">MySQL</span><span class="pln"> connection id </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L2"><code><span class="typ">Server</span><span class="pln"> version</span><span class="pun">:</span><span class="pln"> </span><span class="lit">5.7</span><span class="pun">-</span><span class="typ">Radon</span><span class="pun">-</span><span class="lit">1.0</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="typ">Copyright</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c</span><span class="pun">)</span><span class="pln"> </span><span class="lit">2000</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2018</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Oracle</span><span class="pln"> </span><span class="kwd">and</span><span class="pun">/</span><span class="kwd">or</span><span class="pln"> its affiliates</span><span class="pun">.</span><span class="pln"> </span><span class="typ">All</span><span class="pln"> rights reserved</span><span class="pun">.</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="typ">Oracle</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a registered trademark of </span><span class="typ">Oracle</span><span class="pln"> </span><span class="typ">Corporation</span><span class="pln"> </span><span class="kwd">and</span><span class="pun">/</span><span class="kwd">or</span><span class="pln"> its</span></code></li><li class="L7"><code><span class="pln">affiliates</span><span class="pun">.</span><span class="pln"> </span><span class="typ">Other</span><span class="pln"> names may be trademarks of their respective</span></code></li><li class="L8"><code><span class="pln">owners</span><span class="pun">.</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="typ">Type</span><span class="pln"> </span><span class="str">'help;'</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="str">'\h'</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> help</span><span class="pun">.</span><span class="pln"> </span><span class="typ">Type</span><span class="pln"> </span><span class="str">'\c'</span><span class="pln"> to clear the current input statement</span><span class="pun">.</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">mysql</span><span class="pun">&gt;</span><span class="pln"> </span></code></li></ol></pre><p data-anchor-id="l5jl">Now you can send sql from mysql client, for more sql surpported by randon sql protocol, see *  Radon_SQL_surported <br>
<code>Example:</code></p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="wbx5"><ol class="linenums"><li class="L0"><code><span class="pln">mysql</span><span class="pun">&gt;</span><span class="pln"> SHOW DATABASES</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pun">+--------------------+</span></code></li><li class="L2"><code><span class="pun">|</span><span class="pln"> </span><span class="typ">Database</span><span class="pln">           </span><span class="pun">|</span></code></li><li class="L3"><code><span class="pun">+--------------------+</span></code></li><li class="L4"><code><span class="pun">|</span><span class="pln"> information_schema </span><span class="pun">|</span></code></li><li class="L5"><code><span class="pun">|</span><span class="pln"> db_gry_test        </span><span class="pun">|</span></code></li><li class="L6"><code><span class="pun">|</span><span class="pln"> db_test1           </span><span class="pun">|</span></code></li><li class="L7"><code><span class="pun">|</span><span class="pln"> mysql              </span><span class="pun">|</span></code></li><li class="L8"><code><span class="pun">|</span><span class="pln"> performance_schema </span><span class="pun">|</span></code></li><li class="L9"><code><span class="pun">|</span><span class="pln"> sys                </span><span class="pun">|</span></code></li><li class="L0"><code><span class="pun">+--------------------+</span></code></li><li class="L1"><code><span class="lit">6</span><span class="pln"> rows </span><span class="kwd">in</span><span class="pln"> </span><span class="kwd">set</span><span class="pln"> </span><span class="pun">(</span><span class="lit">0.01</span><span class="pln"> sec</span><span class="pun">)</span></code></li></ol></pre></div>
</body>
</html>